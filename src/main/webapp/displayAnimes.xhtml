<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                template="/templates/mainTemplate.xhtml">


    <ui:define name="bodyContent">
        <h:form id="form">
            <p:dataTable value="#{animeBean.animeList}" var="anime"
                         paginator="true"
                         paginatorTemplate=
                                 "{FirstPageLink}
         {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}" lazy="true">

                <f:facet name="header">
                    Mes animes
                </f:facet>

                <p:column headerText="Title" filterBy="#{anime.title}" filterMatchMode="contains" filterValue="#{anime.title}">
                    <h:outputText value="#{anime.title}" />
                </p:column>

                <p:column headerText="Anime detail">
                    <p:commandLink update=":form:animeDetail" oncomplete="PF('animeDialog').show()" title="View Detail">
                        <h:outputText styleClass="ui-icon ui-icon-search" style="margin:0 auto;"/>
                        <f:setPropertyActionListener value="#{anime}" target="#{displayAnimesBean.selectedAnime}" />
                    </p:commandLink>
                </p:column>
            </p:dataTable>

            <p:dialog header="Anime Info" widgetVar="animeDialog" modal="true" showEffect="blind" hideEffect="explode" resizable="false">
                <p:outputPanel id="animeDetail" style="text-align:center;" autoUpdate="true">
                    <p:panelGrid  columns="2" rendered="#{not empty displayAnimesBean.selectedAnime}" columnClasses="label,value">

                        <f:facet name="header">
                            <p:graphicImage name="#{displayAnimesBean.selectedAnime.icon}"/>
                        </f:facet>

                        <h:outputText value="Title" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.title}" />

                        <h:outputText value="Year:" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.year}"/>

                        <h:outputText value="Studio:" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.studio}" />

                        <h:outputText value="Episode:" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.episode}" />

                        <h:outputText value="Season:" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.season}" />

                        <h:outputText value="Status:" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.status}" />

                        <h:outputText value="Synopsis:" />
                        <h:outputText value="#{displayAnimesBean.selectedAnime.synopsis}" />
                    </p:panelGrid>
                </p:outputPanel>
            </p:dialog>
        </h:form>
    </ui:define>
</ui:composition>
